<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shrekzel Simulator</title>

<link rel="shortcut icon" href="../../img/amogus.webp" type="image/x-icon">
<link rel="stylesheet" href="index.css">
<link rel="stylesheet" href="../../content.css">

<style>
body{
background:
linear-gradient(180deg,#050008,#140022 45%,#000 100%),
repeating-linear-gradient(
90deg,
rgba(255,0,255,.04),
rgba(255,0,255,.04) 2px,
transparent 2px,
transparent 8px
);
animation:bgShift 20s linear infinite;
}

@keyframes bgShift{
0%{background-position:0 0,0 0}
100%{background-position:0 0,600px 0}
}

.game-container{
max-width:900px;
margin:40px auto;
display:flex;
justify-content:center;
user-select:none;
touch-action:none;
}

.frame{
position:relative;
padding:24px;
border-radius:22px;
background:radial-gradient(circle at top,#2a0044,#050008);
box-shadow:
0 0 50px rgba(255,0,255,.7),
0 0 100px rgba(0,255,255,.5),
inset 0 0 35px rgba(0,0,0,.9);
transition:box-shadow .15s,transform .15s;
}

.frame::before{
content:"";
position:absolute;
inset:0;
border-radius:22px;
background:
linear-gradient(transparent 65%,rgba(0,255,255,.12)),
repeating-linear-gradient(
0deg,
rgba(255,255,255,.018),
rgba(255,255,255,.018) 1px,
transparent 1px,
transparent 4px
);
mix-blend-mode:screen;
pointer-events:none;
}

.frame::after{
content:"";
position:absolute;
inset:0;
border-radius:22px;
box-shadow:inset 0 0 70px rgba(0,0,0,.75);
pointer-events:none;
}

canvas{
background:radial-gradient(circle at center,#220033,#0c0018 70%);
border-radius:14px;
display:block;
}

.start-overlay{
position:absolute;
inset:0;
display:flex;
align-items:center;
justify-content:center;
background:radial-gradient(circle at center,rgba(255,0,255,.18),rgba(0,0,0,.9));
border-radius:22px;
z-index:5;
}

.start-btn{
font-size:1.2rem;
letter-spacing:.25em;
padding:18px 44px;
border-radius:40px;
border:2px solid #00ffff;
color:#00ffff;
background:linear-gradient(180deg,#ff00ff,#4b00ff);
box-shadow:
0 0 30px rgba(255,0,255,1),
0 0 60px rgba(0,255,255,.9);
cursor:pointer;
transition:transform .2s,box-shadow .2s;
}

.start-btn:hover{
transform:scale(1.08);
box-shadow:
0 0 50px rgba(255,0,255,1),
0 0 100px rgba(0,255,255,1);
}

.hint{
text-align:center;
opacity:.85;
margin-top:12px;
color:#ff99ff;
letter-spacing:.1em;
}
</style>
</head>
<body>

<div class="wrapper">
<div class="site-header"></div>

<main class="container article-content">
<h1 class="article-main-title"><u>Shrekzel Simulator</u></h1>
<p class="article-date"><i>Article Published by Cameron at 2026/01/19 12:53 AM CET</i></p>

<div class="game-container">
<div class="frame" id="frame">
<canvas id="c" width="500" height="500"></canvas>
<div class="start-overlay" id="overlay">
<button class="start-btn" id="startBtn">START GAME</button>
</div>
</div>
</div>

<div style="display:flex;gap:12px;justify-content:center;margin-top:14px">
<button class="start-btn" id="colorBtn">COLOR MODE</button>
<button class="start-btn" id="shapeBtn">SHAPE</button>
</div>
<p class="hint">Drag to rotate Â· Scroll to zoom</p>
</main>

<div class="site-footer"></div>
</div>

<script src="../../contentheader.js"></script>

<script>
const c=document.getElementById("c"),x=c.getContext("2d"),frame=document.getElementById("frame")
let rx=0,ry=0,rz=0,rw=0,rv=0,vx=.0008,vy=.0006,drag=false,lx=0,ly=0,lastInput=0
let camZ=520,size=120,shapeIndex=0,hue=0,colorMode=true

let lastTime=performance.now(),fps=60
let sphereLOD=18,hyperLOD=22

const img=new Image()
img.src="image.jpg"

const audio=new Audio("song.mp3")
audio.loop=true

let ctx,src,analyser,data,pulse=0,beatSmooth=0

const baseHues=[0,60,120,180,240,300]

function rxp(p,a){const s=Math.sin(a),c=Math.cos(a);return[p[0],p[1]*c-p[2]*s,p[1]*s+p[2]*c]}
function ryp(p,a){const s=Math.sin(a),c=Math.cos(a);return[p[0]*c+p[2]*s,p[1],-p[0]*s+p[2]*c]}
function rzp(p,a){const s=Math.sin(a),c=Math.cos(a);return[p[0]*c-p[1]*s,p[0]*s+p[1]*c,p[2]]}
function proj(p){const z=p[2]+camZ,s=camZ/z;return[p[0]*s+250,p[1]*s+250,z]}

function rot4(p){
let [x,y,z,w]=p
let s=Math.sin(rw),c=Math.cos(rw)
return[x*c-w*s,y,z,x*s+w*c]
}

function rot5(p){
let [x,y,z,w,v]=p
let s=Math.sin(rv),c=Math.cos(rv)
return[x*c-v*s,y,z,w,x*s+v*c]
}

function cube(){
return{V:[[-1,-1,-1],[1,-1,-1],[1,1,-1],[-1,1,-1],[-1,-1,1],[1,-1,1],[1,1,1],[-1,1,1]],
F:[[0,1,2,3],[4,5,6,7],[0,1,5,4],[2,3,7,6],[1,2,6,5],[0,3,7,4]]}
}

function pyramid(){
return{V:[[0,1,0],[-1,-1,-1],[1,-1,-1],[1,-1,1],[-1,-1,1]],
F:[[1,2,3,4],[0,1,2],[0,2,3],[0,3,4],[0,4,1],[1,2,0,4]]}
}

function sphere(){
const V=[],F=[],d=sphereLOD
for(let i=0;i<=d;i++)for(let j=0;j<=d;j++){
const a=i*Math.PI/d,b=j*2*Math.PI/d
V.push([Math.sin(a)*Math.cos(b),Math.cos(a),Math.sin(a)*Math.sin(b)])
}
for(let i=0;i<d;i++)for(let j=0;j<d;j++){
const k=i*(d+1)+j
F.push([k,k+1,k+d+2,k+d+1])
}
return{V,F}
}

function hexagram(){
const V=[],F=[],r1=1,r2=.6,h=1
for(let i=0;i<6;i++){
const a=i*Math.PI/3
V.push([Math.cos(a)*r1,h,Math.sin(a)*r1])
V.push([Math.cos(a+Math.PI/6)*r2,-h,Math.sin(a+Math.PI/6)*r2])
}
for(let i=0;i<6;i++){
const a=i*2,b=(i*2+2)%12,c=(i*2+3)%12,d=(i*2+1)%12
F.push([a,b,c,d])
}
return{V,F}
}

function tesseract(){
const V=[],E=[]
for(let x of[-1,1])for(let y of[-1,1])for(let z of[-1,1])for(let w of[-1,1])V.push([x,y,z,w])
for(let i=0;i<V.length;i++)for(let j=i+1;j<V.length;j++){
let d=0
for(let k=0;k<4;k++)if(V[i][k]!==V[j][k])d++
if(d===1)E.push([i,j])
}
return{V,E,wire4:true}
}

function penteract(){
const V=[],E=[]
for(let x of[-1,1])for(let y of[-1,1])for(let z of[-1,1])for(let w of[-1,1])for(let v of[-1,1])V.push([x,y,z,w,v])
for(let i=0;i<V.length;i++)for(let j=i+1;j<V.length;j++){
let d=0
for(let k=0;k<5;k++)if(V[i][k]!==V[j][k])d++
if(d===1)E.push([i,j])
}
return{V,E,wire5:true}
}

function hypersphere(){
const V=[],F=[],d=hyperLOD
for(let i=0;i<=d;i++)for(let j=0;j<=d;j++){
const a=i*Math.PI/d,b=j*2*Math.PI/d
const r=1+.1*Math.sin(a*6+b*5)
V.push([Math.sin(a)*Math.cos(b)*r,Math.cos(a)*r,Math.sin(a)*Math.sin(b)*r])
}
for(let i=0;i<d;i++)for(let j=0;j<d;j++){
const k=i*(d+1)+j
F.push([k,k+1,k+d+2,k+d+1])
}
return{V,F}
}

const shapes=[cube,pyramid,sphere,hexagram,tesseract,penteract,hypersphere]

function adaptLOD(){
if(fps<22){sphereLOD=Math.max(8,sphereLOD-1);hyperLOD=Math.max(10,hyperLOD-1)}
if(fps>45){sphereLOD=Math.min(20,sphereLOD+1);hyperLOD=Math.min(26,hyperLOD+1)}
}

function draw(t){
fps=1000/(t-lastTime)
lastTime=t
adaptLOD()

x.clearRect(0,0,500,500)

if(analyser){
analyser.getByteFrequencyData(data)
let raw=data.reduce((a,b)=>a+b,0)/data.length/255
beatSmooth+=(raw-beatSmooth)*.08
pulse=Math.max(pulse*.92,beatSmooth)
}

frame.style.transform=`scale(${1+pulse*.04})`
const idle=Date.now()-lastInput>4500
if(idle){rx+=vx*(1+pulse);ry+=vy*(1+pulse)}
hue=(hue+.7)%360
rw+=.003
rv+=.002

const S=shapes[shapeIndex]()
const pts=[]

if(S.wire4||S.wire5){
const hull=[]
S.V.forEach(p=>{
let r=p
if(S.wire5)r=rot5(r)
r=rot4(r)
let d=3/(3-r[3])
r=[r[0]*d,r[1]*d,r[2]*d]
r=rxp(r,rx);r=ryp(r,ry);r=rzp(r,rz)
const pr=proj([r[0]*size,r[1]*size,r[2]*size])
pts.push(pr)
hull.push(pr)
})
x.save()
x.beginPath()
hull.forEach((p,i)=>i?x.lineTo(p[0],p[1]):x.moveTo(p[0],p[1]))
x.closePath()
x.globalAlpha=.45
x.clip()
x.drawImage(img,0,0,500,500)
x.restore()
S.E.forEach((e,i)=>{
const a=pts[e[0]],b=pts[e[1]]
const h=baseHues[i%6]+hue
x.strokeStyle=`hsla(${h},100%,70%,.95)`
x.lineWidth=1.6+pulse*2
x.beginPath();x.moveTo(a[0],a[1]);x.lineTo(b[0],b[1]);x.stroke()
})
}else{
S.V.forEach(p=>{
let r=rxp(p,rx);r=ryp(r,ry)
pts.push(proj([r[0]*size,r[1]*size,r[2]*size]))
})
S.F.map((f,i)=>({f,i,z:f.reduce((a,b)=>a+pts[b][2],0)/f.length}))
.sort((a,b)=>b.z-a.z)
.forEach(o=>{
const h=baseHues[o.i%6]+hue
x.beginPath()
o.f.forEach((j,i)=>i?x.lineTo(pts[j][0],pts[j][1]):x.moveTo(pts[j][0],pts[j][1]))
x.closePath()
if(colorMode){
x.fillStyle=`hsla(${h},100%,60%,.55)`
x.fill()
}
x.save()
x.clip()
x.globalAlpha=.55
x.drawImage(img,0,0,500,500)
x.restore()
x.strokeStyle=`hsla(${h},100%,75%,1)`
x.lineWidth=1.4
x.stroke()
})
}

requestAnimationFrame(draw)
}

c.addEventListener("pointerdown",e=>{drag=true;lx=e.clientX;ly=e.clientY;lastInput=Date.now()})
c.addEventListener("pointerup",()=>drag=false)
c.addEventListener("pointerleave",()=>drag=false)
c.addEventListener("pointermove",e=>{
if(!drag)return
vx=(e.clientY-ly)*.0015
vy=(e.clientX-lx)*.0015
rx+=vx*6;ry+=vy*6
lx=e.clientX;ly=e.clientY
lastInput=Date.now()
})
c.addEventListener("wheel",e=>{
camZ+=e.deltaY*.4
camZ=Math.max(280,Math.min(900,camZ))
})

document.getElementById("colorBtn").onclick=()=>colorMode=!colorMode
document.getElementById("shapeBtn").onclick=()=>shapeIndex=(shapeIndex+1)%shapes.length

document.getElementById("startBtn").onclick=()=>{
ctx=new AudioContext()
src=ctx.createMediaElementSource(audio)
analyser=ctx.createAnalyser()
analyser.fftSize=512
data=new Uint8Array(analyser.frequencyBinCount)
src.connect(analyser)
analyser.connect(ctx.destination)
audio.play()
document.getElementById("overlay").style.display="none"
requestAnimationFrame(draw)
}
</script>


</body>
</html>
